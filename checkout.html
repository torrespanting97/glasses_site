<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - VisionPlus</title>
    <!-- Same assets as index.html -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="assets/css/theme.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/checkout.css" rel="stylesheet">
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Navigation Placeholder -->
    <div id="navigation-placeholder"></div>

    <!-- Checkout Section -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-light">
                            <h3 class="mb-0">Checkout</h3>
                        </div>
                        <div class="card-body">
                            <form id="checkout-form">
                                <!-- Contact Information -->
                                <h5 class="mb-4">Contact Information</h5>
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3">
                                        <label for="firstName" class="form-label">First Name</label>
                                        <input type="text" class="form-control" id="firstName" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="lastName" class="form-label">Last Name</label>
                                        <input type="text" class="form-control" id="lastName" required>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="email" class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="email" required>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="phone" class="form-label">Phone Number</label>
                                        <input type="tel" class="form-control" id="phone" required>
                                    </div>
                                </div>

                                <!-- Shipping Address -->
                                <h5 class="mb-4">Shipping Address</h5>
                                <div class="row mb-4">
                                    <div class="col-12 mb-3">
                                        <label for="address" class="form-label">Street Address</label>
                                        <input type="text" class="form-control" id="address" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="city" class="form-label">City</label>
                                        <input type="text" class="form-control" id="city" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="state" class="form-label">State/Province</label>
                                        <select class="form-select" id="state" required>
                                            <option value="" selected disabled>Select</option>
                                            <!-- States will be populated by JavaScript -->
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="zip" class="form-label">ZIP/Postal Code</label>
                                        <input type="text" class="form-control" id="zip" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="country" class="form-label">Country</label>
                                        <select class="form-select" id="country" required>
                                            <option value="US" selected>United States</option>
                                            <option value="CA">Canada</option>
                                            <option value="UK">United Kingdom</option>
                                            <!-- More countries can be added -->
                                        </select>
                                    </div>
                                </div>

                                <!-- Shipping Method -->
                                <h5 class="mb-4">Shipping Method</h5>
                                <div class="mb-4">
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="radio" name="shippingMethod" id="standardShipping" value="standard" checked>
                                        <label class="form-check-label" for="standardShipping">
                                            <span class="fw-bold">Standard Shipping</span> - Free
                                            <small class="d-block text-muted">3-5 business days</small>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="shippingMethod" id="expressShipping" value="express">
                                        <label class="form-check-label" for="expressShipping">
                                            <span class="fw-bold">Express Shipping</span> - $9.99
                                            <small class="d-block text-muted">1-2 business days</small>
                                        </label>
                                    </div>
                                </div>

                                <!-- Payment Method -->
                                <h5 class="mb-4">Payment Method</h5>
                                <div class="mb-4">
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="radio" name="paymentMethod" id="creditCard" value="creditCard" checked>
                                        <label class="form-check-label" for="creditCard">
                                            <span class="fw-bold">Credit Card</span>
                                        </label>
                                    </div>
                                    <div id="creditCardFields">
                                        <div class="row mb-3">
                                            <div class="col-12 mb-3">
                                                <label for="cardNumber" class="form-label">Card Number</label>
                                                <input type="text" class="form-control" id="cardNumber" placeholder="1234 5678 9012 3456">
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="expiryDate" class="form-label">Expiry Date</label>
                                                <input type="text" class="form-control" id="expiryDate" placeholder="MM/YY">
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="cvv" class="form-label">CVV</label>
                                                <input type="text" class="form-control" id="cvv" placeholder="123">
                                            </div>
                                            <div class="col-12 mb-3">
                                                <label for="cardName" class="form-label">Name on Card</label>
                                                <input type="text" class="form-control" id="cardName">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="paymentMethod" id="paypal" value="paypal">
                                        <label class="form-check-label" for="paypal">
                                            <span class="fw-bold">PayPal</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Order Notes -->
                                <div class="mb-4">
                                    <label for="orderNotes" class="form-label">Order Notes (Optional)</label>
                                    <textarea class="form-control" id="orderNotes" rows="3" placeholder="Special instructions, delivery preferences, etc."></textarea>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="card shadow-sm sticky-top" style="top: 100px;">
                        <div class="card-header bg-light">
                            <h3 class="mb-0">Order Summary</h3>
                        </div>
                        <div class="card-body">
                            <div id="checkout-items">
                                <!-- Items will be loaded from cart -->
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Subtotal:</span>
                                <span id="checkout-subtotal">$0.00</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Shipping:</span>
                                <span id="checkout-shipping">Free</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span>Tax:</span>
                                <span id="checkout-tax">$0.00</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between fw-bold fs-5 mb-4">
                                <span>Total:</span>
                                <span id="checkout-total">$0.00</span>
                            </div>
                            <button type="submit" form="checkout-form" class="btn btn-primary w-100" id="place-order-btn">
                                Place Order
                            </button>
                            <div class="mt-3 text-center">
                                <small class="text-muted">By placing your order, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- Order Confirmation Modal -->
    <div class="modal fade" id="orderConfirmationModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Order Confirmation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="mb-4">
                        <i class="fas fa-check-circle text-success fa-5x"></i>
                    </div>
                    <h4 class="mb-3">Thank You for Your Order!</h4>
                    <p class="mb-4">Your order has been placed successfully. We've sent a confirmation email to <span id="confirmation-email"></span>.</p>
                    <p class="fw-bold">Order Number: <span id="order-number"></span></p>
                    <div class="d-flex justify-content-center gap-3 mt-4">
                        <a href="index.html" class="btn btn-outline-secondary">Continue Shopping</a>
                        <a href="account.html?tab=orders" class="btn btn-primary">View Order Details</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Same scripts as index.html -->
    <script>
        // Include loader (same as index.html)
        async function loadInclude(placeholderId, filePath) {
            try {
                const response = await fetch(filePath);
                if (!response.ok) throw new Error(`${filePath} not found`);
                const html = await response.text();
                const placeholder = document.getElementById(placeholderId);
                if (placeholder) {
                    placeholder.outerHTML = html;
                    return true;
                }
            } catch (error) {
                console.error(`Failed to load ${filePath}:`, error);
            }
            return false;
        }
    
        document.addEventListener('DOMContentLoaded', function() {
            const includesToLoad = [
                { id: 'header-placeholder', path: '/includes/header.html' },
                { id: 'navigation-placeholder', path: '/includes/navigation.html' },
                { id: 'footer-placeholder', path: '/includes/footer.html' }
            ];
    
            includesToLoad.forEach(async ({id, path}) => {
                if (document.getElementById(id)) {
                    await loadInclude(id, path);
                }
            });
            
            // Load checkout items and setup form
            loadCheckout();
        });
    </script>
    
    <!-- jQuery first -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Then Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Your custom scripts -->
    <script src="assets/js/main.js"></script>
    <!-- Checkout JavaScript -->
    <script src="assets/js/checkout.js"></script>
</body>
</html>